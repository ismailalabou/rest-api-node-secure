{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ismailalabou\\\\rest-api-node-secure\\\\frontend\\\\src\\\\Components\\\\LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory, useLocation } from 'react-router-dom';\nexport const LoginPage = props => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  let url = props.baseUrl + '/auth/login';\n  let location = useLocation();\n  let history = useHistory();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  }; // Create a cookie with the JWT\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    axios.post(url, {\n      email,\n      password\n    }).then(res => {\n      // localStorage.setItem(\"my_cookie\", res.data);\n      document.cookie = 'my-token=' + res.data.token + '; max-age=60;';\n      history.push(from);\n      console.log('History', history);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  ;\n\n  function handleOnChange(event) {\n    if (event.target.name === 'email') {\n      setEmail(event.target.value);\n    }\n\n    ;\n\n    if (event.target.name === 'password') {\n      setPassword(event.target.value);\n    }\n\n    ;\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login to your account:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Email: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: handleOnChange,\n      name: \"email\",\n      placeholder: \"freddie.mercury@gmail.com\",\n      size: \"35\",\n      value: email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Password: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: handleOnChange,\n      name: \"password\",\n      placeholder: \"queen_rox\",\n      size: \"35\",\n      value: password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\",\n      value: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 7\n  }, this);\n};\n\n_s(LoginPage, \"CV2yTY8dqu+0YVSAK/vnzMkMON0=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["C:/Users/ismailalabou/rest-api-node-secure/frontend/src/Components/LoginPage.js"],"names":["React","useState","axios","useHistory","useLocation","LoginPage","props","email","setEmail","password","setPassword","url","baseUrl","location","history","from","state","pathname","handleSubmit","event","preventDefault","post","then","res","document","cookie","data","token","push","console","log","catch","error","handleOnChange","target","name","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,EAAoBC,WAApB,QAAsC,kBAAtC;AAEA,OAAO,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AAClC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AAEA,MAAIU,GAAG,GAAGL,KAAK,CAACM,OAAN,GAAgB,aAA1B;AACA,MAAIC,QAAQ,GAAGT,WAAW,EAA1B;AACA,MAAIU,OAAO,GAAGX,UAAU,EAAxB;AACA,MAAI;AAACY,IAAAA;AAAD,MAASF,QAAQ,CAACG,KAAT,IAAkB;AAAED,IAAAA,IAAI,EAAE;AAAEE,MAAAA,QAAQ,EAAE;AAAZ;AAAR,GAA/B,CAPkC,CASpC;;AACE,WAASC,YAAT,CAAsBC,KAAtB,EAA4B;AAC1BA,IAAAA,KAAK,CAACC,cAAN;AACAlB,IAAAA,KAAK,CAACmB,IAAN,CAAWV,GAAX,EAAgB;AAACJ,MAAAA,KAAD;AAAQE,MAAAA;AAAR,KAAhB,EACGa,IADH,CACSC,GAAD,IAAS;AACb;AACAC,MAAAA,QAAQ,CAACC,MAAT,GAAkB,cAAYF,GAAG,CAACG,IAAJ,CAASC,KAArB,GAA2B,eAA7C;AACAb,MAAAA,OAAO,CAACc,IAAR,CAAab,IAAb;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBhB,OAAvB;AACD,KANH,EAOGiB,KAPH,CAOUC,KAAD,IAAW;AAChBH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,KATH;AAUD;;AAAA;;AAED,WAASC,cAAT,CAAwBd,KAAxB,EAA8B;AAC5B,QAAIA,KAAK,CAACe,MAAN,CAAaC,IAAb,KAAsB,OAA1B,EAAkC;AAChC3B,MAAAA,QAAQ,CAACW,KAAK,CAACe,MAAN,CAAaE,KAAd,CAAR;AACD;;AAAA;;AACD,QAAIjB,KAAK,CAACe,MAAN,CAAaC,IAAb,KAAsB,UAA1B,EAAqC;AACnCzB,MAAAA,WAAW,CAACS,KAAK,CAACe,MAAN,CAAaE,KAAd,CAAX;AACD;;AAAA;AACF;;AAAA;AAEC,sBACE;AAAM,IAAA,QAAQ,EAAElB,YAAhB;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAO,MAAA,QAAQ,EAAEe,cAAjB;AAAiC,MAAA,IAAI,EAAC,OAAtC;AAA8C,MAAA,WAAW,EAAC,2BAA1D;AAAsF,MAAA,IAAI,EAAC,IAA3F;AAAgG,MAAA,KAAK,EAAE1B;AAAvG;AAAA;AAAA;AAAA;AAAA,YAHF,eAIE;AAAA;AAAA;AAAA;AAAA,YAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,eAME;AAAO,MAAA,QAAQ,EAAE0B,cAAjB;AAAiC,MAAA,IAAI,EAAC,UAAtC;AAAiD,MAAA,WAAW,EAAC,WAA7D;AAAyE,MAAA,IAAI,EAAC,IAA9E;AAAmF,MAAA,KAAK,EAAExB;AAA1F;AAAA;AAAA;AAAA;AAAA,YANF,eAOE;AAAA;AAAA;AAAA;AAAA,YAPF,eAQE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,YARF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAYH,CA7CM;;GAAMJ,S;UAKID,W,EACDD,U;;;KANHE,S","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport {useHistory, useLocation} from 'react-router-dom';\r\n\r\nexport const LoginPage = (props) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  let url = props.baseUrl + '/auth/login';\r\n  let location = useLocation();\r\n  let history = useHistory();\r\n  let {from} = location.state || { from: { pathname: \"/\" } };\r\n\r\n// Create a cookie with the JWT\r\n  function handleSubmit(event){\r\n    event.preventDefault();\r\n    axios.post(url, {email, password})\r\n      .then((res) => {\r\n        // localStorage.setItem(\"my_cookie\", res.data);\r\n        document.cookie = 'my-token='+res.data.token+'; max-age=60;';\r\n        history.push(from);\r\n        console.log('History', history);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  function handleOnChange(event){\r\n    if (event.target.name === 'email'){\r\n      setEmail(event.target.value);\r\n    };\r\n    if (event.target.name === 'password'){\r\n      setPassword(event.target.value);\r\n    };\r\n  };\r\n\r\n    return(\r\n      <form onSubmit={handleSubmit}>\r\n        <h1>Login to your account:</h1>\r\n        <label>Email: </label>\r\n        <input onChange={handleOnChange} name=\"email\" placeholder=\"freddie.mercury@gmail.com\" size=\"35\" value={email}/>\r\n        <br/>\r\n        <label>Password: </label>\r\n        <input onChange={handleOnChange} name=\"password\" placeholder=\"queen_rox\" size=\"35\" value={password}/>\r\n        <br/>\r\n        <input type='submit' value='Submit'/>\r\n      </form>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}